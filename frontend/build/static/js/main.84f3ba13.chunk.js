(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(34),r=c.n(a),i=(c(59),c(8)),o=(c(60),c(17)),j=c(7),l=(c(61),c(44)),d=c.n(l),h=c(45),b=c.n(h),O=c(46),u=c.n(O),x=c(47),f=c.n(x),p=c(49),m=c.n(p),v=c(42),g=c.n(v),_=c(48),N=c.n(_),k=c(0);var S=function(e){var t=Object(n.useState)({root:"root__sidebar",side:"sidebar",dehaze:"dehaze"}),c=Object(i.a)(t,2),s=c[0],a=c[1];return Object(k.jsxs)("div",{className:s.root,children:[Object(k.jsx)("div",{className:s.dehaze,onClick:function(){var e="root__sidebar"===s.root?"root__hidden":"root__sidebar",t="sidebar"===s.side?"sidebar__hidden":"sidebar",c="dehaze"===s.dehaze?"dehaze__hidden":"dehaze";a({root:e,side:t,dehaze:c})},children:Object(k.jsx)(g.a,{})}),Object(k.jsxs)("div",{className:s.side,children:[Object(k.jsxs)(o.b,{className:"sidebarOption",to:"/home",onClick:e.click,children:[Object(k.jsx)(d.a,{}),"Homepage"]}),Object(k.jsxs)(o.b,{className:"sidebarOption",to:"/stats",onClick:e.click,children:[Object(k.jsx)(b.a,{}),"Gamer stats"]}),Object(k.jsxs)(o.b,{className:"sidebarOption",to:"/charts",onClick:e.click,children:[Object(k.jsx)(u.a,{}),"Charts"]}),Object(k.jsxs)(o.b,{className:"sidebarOption",to:"/transactions",onClick:e.click,children:[Object(k.jsx)(f.a,{}),"Transactions"]}),Object(k.jsxs)(o.b,{className:"sidebarOption",to:"/redisReports",onClick:e.click,children:[Object(k.jsx)(N.a,{}),"Redis Reports"]}),Object(k.jsxs)("a",{className:"sidebarOption",href:"https://github.com/sergioarmgpl/operating-systems-usac-course/blob/master/lang/en/projects/project1v4/project1.md",target:"_blank",rel:"noreferrer",children:[Object(k.jsx)(m.a,{}),"More"]}),Object(k.jsxs)("div",{className:"__Copyright",children:[Object(k.jsx)("p",{children:"Sistemas Operativos 1\xa0\xb7\xa0Grupo 7"}),Object(k.jsx)("p",{children:"USAC \xa9 2S 2021\xa0\xb7\xa0Proyecto 2"})]})]})]})};c(71),c(72);var y=function(e){var t=Object(j.f)();return Object(k.jsxs)("div",{className:"__header",children:[Object(k.jsx)("h2",{children:e.title}),Object(k.jsxs)("select",{id:"db_selector",defaultValue:e.redis?"2":"1",onChange:function(e){"2"===e.target.value&&t.push("/redisReports")},children:[Object(k.jsx)("option",{disabled:!!e.redis,value:"1",children:"Mongo DB"}),Object(k.jsx)("option",{value:"2",children:"Redis"})]})]})};c(73);var C=function(){return Object(k.jsx)("div",{className:"gif_loading",children:Object(k.jsx)("img",{src:"https://quevedoes.files.wordpress.com/2019/08/img_8392.gif",id:"loading",alt:"loading"})})},E=c(53),w=Object(E.a)("http://localhost:8080");w.on("connnection",(function(){console.log("Connected to socket")})),w.on("disconnect",(function(e){console.log("Socket disconnected because of "+e)})),w.on("message",(function(e){console.log("Socket message: "+e)}));var R=w;var L=function(){var e=Object(n.useState)({last_games:[],top10_players:[]}),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(i.a)(a,2),o=r[0],j=r[1],l=function(){fetch("http://localhost:8080/home").then((function(e){return e.json()})).then((function(e){s(e),j(!0)}))};return Object(n.useEffect)((function(){return l(),function(){R.off("log-inserted")}}),[]),Object(n.useEffect)((function(){R.on("log-inserted",(function(){console.log("homepage socket ok"),l()}))}),[]),Object(k.jsxs)("div",{className:"homepage",children:[Object(k.jsx)(y,{title:"USAC Squid Game"}),o?Object(k.jsxs)("div",{className:"home__content",children:[Object(k.jsx)("h3",{children:"Last 10 games"}),Object(k.jsx)("div",{className:"home__table",children:Object(k.jsx)("table",{children:Object(k.jsxs)("tbody",{children:[Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"\xa0\xa0Game#"}),Object(k.jsx)("th",{children:"Player#"}),Object(k.jsx)("th",{children:"Game Name"})]}),c.last_games.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsxs)("td",{children:["\xa0\xa0 ",e.gameid]}),Object(k.jsxs)("td",{children:["\xa0",e.winner]}),Object(k.jsx)("td",{children:e.gamename})]},e._id)}))]})})}),Object(k.jsx)("h3",{children:"Top 10 Players"}),Object(k.jsx)("div",{className:"home__table",children:Object(k.jsx)("table",{children:Object(k.jsxs)("tbody",{children:[Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"\xa0\xa0Player#"}),Object(k.jsx)("th",{children:"Wins"})]}),c.top10_players.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsxs)("td",{children:["\xa0 \xa0 ",e._id]}),Object(k.jsxs)("td",{children:["\xa0",e.wins]})]},e._id)}))]})})})]}):Object(k.jsx)(C,{})]})},P=c(4),T=c(3),M=c(6),A=c(5),G=(c(78),function(e){Object(M.a)(c,e);var t=Object(A.a)(c);function c(){return Object(P.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"notfound",children:[Object(k.jsx)("h1",{id:"title",children:"404"}),Object(k.jsx)("h1",{id:"text",children:"Not Found"}),Object(k.jsx)("p",{children:Object(k.jsx)(o.b,{to:"/home",children:"Go to Home"})})]})}}]),c}(s.a.Component)),I=G;c(79);var F=function(){var e=Object(n.useState)("-"),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),r=Object(i.a)(a,2),o=r[0],j=r[1],l=Object(n.useState)([]),d=Object(i.a)(l,2),h=d[0],b=d[1],O=Object(n.useState)(!1),u=Object(i.a)(O,2),x=u[0],f=u[1];return Object(n.useEffect)((function(){var e=function(){fetch("http://localhost:8080/stats").then((function(e){return e.json()})).then((function(e){b(e),f(!0)}))};return e(),R.on("log-inserted",(function(){console.log("gamerStats socket ok"),e()})),function(){R.off("log-inserted")}}),[]),Object(n.useEffect)((function(){!function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({player:c})};fetch("http://localhost:8080/stats",e).then((function(e){return e.json()})).then((function(e){j(e),f(!0)}))}()}),[c]),Object(k.jsxs)("div",{className:"stats",children:[Object(k.jsx)(y,{title:"Realtime Gamer Stats"}),x?Object(k.jsxs)("div",{className:"gamer__content",children:[Object(k.jsxs)("select",{id:"player__select",defaultValue:c,onChange:function(e){return t=e.target.value,f(!1),void s(t);var t},children:[Object(k.jsx)("option",{value:"-",disabled:!0,children:"Choose a player"}),h.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))]}),Object(k.jsx)("div",{className:"gamer__table",children:Object(k.jsx)("table",{children:Object(k.jsxs)("tbody",{children:[Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"\xa0\xa0Game#"}),Object(k.jsx)("th",{children:"Game Name"}),Object(k.jsx)("th",{children:"State"})]}),o.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsxs)("td",{children:["\xa0\xa0 ",e.gameid]}),Object(k.jsxs)("td",{children:["\xa0",e.gamename]}),Object(k.jsx)("td",{children:"Win"})]},e._id)}))]})})})]}):Object(k.jsx)(C,{})]})},z=c(31),q=c.n(z),W=c(37);c(81);var J=function(){var e=Object(n.useState)({logs:[],isLoaded:!1}),t=Object(i.a)(e,2),c=t[0],s=t[1],a=function(){var e=Object(W.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:8080/transactions").then((function(e){return e.json()})).then((function(e){s({logs:e,isLoaded:!0})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return a(),function(){R.off("log-inserted")}}),[]),Object(n.useEffect)((function(){R.on("log-inserted",(function(){console.log("logs sockets ok"),a()}))}),[]),Object(k.jsxs)("div",{className:"logs",children:[Object(k.jsx)(y,{title:"Transactions"}),c.isLoaded?Object(k.jsxs)("div",{className:"logs__content",children:[Object(k.jsx)("h3",{children:"Log de datos almacenados"}),Object(k.jsx)("div",{className:"logs__table",children:Object(k.jsx)("table",{children:Object(k.jsxs)("tbody",{children:[Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"\xa0\xa0Request#"}),Object(k.jsx)("th",{children:"Game#"}),Object(k.jsx)("th",{children:"Game Name"}),Object(k.jsx)("th",{children:"Winner"}),Object(k.jsx)("th",{children:"Players"}),Object(k.jsx)("th",{children:"Worker"})]}),c.logs.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsxs)("td",{children:["\xa0\xa0 ",e.request_number]}),Object(k.jsx)("td",{children:e.gameid}),Object(k.jsx)("td",{children:e.gamename}),Object(k.jsx)("td",{children:e.winner}),Object(k.jsx)("td",{children:e.players}),Object(k.jsx)("td",{children:e.worker})]},e.request_number)}))]})})})]}):Object(k.jsx)(C,{})]})},B=(c(82),c(1).Component),D=c(41),K=D.CanvasJS,U=D.CanvasJSChart,H=function(e){Object(M.a)(c,e);var t=Object(A.a)(c);function c(){var e;return Object(P.a)(this,c),(e=t.call(this)).state={dataPoints:[{y:0,label:"Kafka"},{y:0,label:"RabbitMQ"},{y:0,label:"Pub/Sub"}]},e}return Object(T.a)(c,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.workers.length;t++){var c=this.props.workers[t];e.push({y:c.count,label:c._id})}e.length>0&&this.setState({dataPoints:e})}},{key:"render",value:function(){var e={animationEnabled:!0,theme:"dark1",backgroundColor:"transparent",height:365,title:{text:""},axisX:{title:"",reversed:!0},axisY:{title:"INSERTIONS",includeZero:!0,labelFormatter:this.addSymbols},data:[{type:"bar",dataPoints:this.state.dataPoints}]};return Object(k.jsx)(U,{options:e})}},{key:"addSymbols",value:function(e){var t=["","K","M","B"],c=Math.max(Math.floor(Math.log(e.value)/Math.log(1e3)),0);c>t.length-1&&(c=t.length-1);var n=t[c];return K.formatNumber(e.value/Math.pow(1e3,c))+n}}]),c}(B),Q=c(1).Component,V=c(41).CanvasJSChart,Y=function(e){Object(M.a)(c,e);var t=Object(A.a)(c);function c(){var e;return Object(P.a)(this,c),(e=t.call(this)).state={dataPoints:[]},e}return Object(T.a)(c,[{key:"getTotal",value:function(e){for(var t=0,c=0;c<e.length;c++){t+=e[c].count}return t}},{key:"componentDidMount",value:function(){for(var e=[],t=this.getTotal(this.props.top_3),c=0;c<this.props.top_3.length;c++){var n=this.props.top_3[c],s=n.count/t*100;e.push({y:s.toFixed(2),label:n._id,indexLabelFontColor:"black"})}this.setState({dataPoints:e})}},{key:"render",value:function(){var e={theme:"dark1",backgroundColor:"#15181c",height:325,animationEnabled:!0,exportFileName:"Top 5 Hashtags",exportEnabled:!0,title:{text:""},legend:{fontColor:"white",padding:8},data:[{type:"pie",showInLegend:!0,legendText:"{label}",toolTipContent:"{label}: <strong>{y}%</strong>",indexLabel:"{y}%",indexLabelPlacement:"inside",dataPoints:this.state.dataPoints}]};return Object(k.jsx)(V,{options:e})}}]),c}(Q);var X=function(){var e=Object(n.useState)({top3_games:[],inserts_workers:[],isLoaded:!1}),t=Object(i.a)(e,2),c=t[0],s=t[1],a=function(){fetch("http://localhost:8080/analytics").then((function(e){return e.json()})).then((function(e){s(e)}))};return Object(n.useEffect)((function(){return a(),function(){R.off("log-inserted")}}),[]),Object(n.useEffect)((function(){R.on("log-inserted",(function(){console.log("charts socket ok"),a()}))}),[]),Object(k.jsxs)("div",{className:"charts",children:[Object(k.jsx)(y,{title:"Analytics"}),c.isLoaded?Object(k.jsxs)("div",{className:"flex__container",children:[Object(k.jsxs)("div",{className:"vrs__container",children:[Object(k.jsx)("h2",{children:"WORKERS COMPARISON"}),Object(k.jsx)("div",{className:"vrs__chart",children:Object(k.jsx)(H,{workers:c.inserts_workers})})]}),Object(k.jsxs)("div",{className:"top__container",children:[Object(k.jsx)("h2",{children:"TOP 3 GAMES"}),Object(k.jsx)("div",{className:"top__chart",children:Object(k.jsx)(Y,{top_3:c.top3_games})})]})]}):Object(k.jsx)(C,{})]})};c(85);var Z=function(){var e=Object(n.useState)({last_request:0,last_gameid:"",last_gamename:"",last_winner:"",last_players:0,last_worker:"",isLoaded:!1}),t=Object(i.a)(e,2),c=t[0],s=t[1],a=function(){var e=Object(W.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:8080/redisReports").then((function(e){return e.json()})).then((function(e){s(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return a(),function(){R.off("redis-report")}}),[]),Object(n.useEffect)((function(){R.on("redis-report",(function(){console.log("redis reports socket ok"),a()}))}),[]),Object(k.jsxs)("div",{className:"redis",children:[Object(k.jsx)(y,{title:"Redis reports",redis:!0}),c.isLoaded?Object(k.jsx)("div",{className:"redis__content",children:Object(k.jsxs)("div",{className:"cards__container",children:[Object(k.jsxs)("div",{className:"report__card",id:"card-1",children:[Object(k.jsx)("h2",{children:"REQUESTS NUMBER"}),Object(k.jsx)("p",{children:c.last_request})]}),Object(k.jsxs)("div",{className:"report__card",id:"card-2",children:[Object(k.jsx)("h2",{children:"LAST GAME ID"}),Object(k.jsx)("p",{children:c.last_gameid})]}),Object(k.jsxs)("div",{className:"report__card",id:"card-3",children:[Object(k.jsx)("h2",{children:"LAST GAME NAME"}),Object(k.jsx)("p",{children:c.last_gamename})]}),Object(k.jsxs)("div",{className:"report__card",id:"card-4",children:[Object(k.jsx)("h2",{children:"LAST WINNER"}),Object(k.jsx)("p",{children:c.last_winner})]}),Object(k.jsxs)("div",{className:"report__card",id:"card-5",children:[Object(k.jsx)("h2",{children:"LAST PLAYERS"}),Object(k.jsx)("p",{children:c.last_players})]}),Object(k.jsxs)("div",{className:"report__card",id:"card-6",children:[Object(k.jsx)("h2",{children:"LAST WORKER INSERTION"}),Object(k.jsx)("p",{children:c.last_worker})]})]})}):Object(k.jsx)(C,{})]})};var $=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(k.jsx)("div",{className:"app",children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(S,{click:function(){s(c+1)}}),Object(k.jsxs)(j.c,{children:[Object(k.jsx)(j.a,{exact:!0,path:["/","/home"],children:Object(k.jsx)(L,{})}),Object(k.jsx)(j.a,{exact:!0,path:"/stats",children:Object(k.jsx)(F,{})}),Object(k.jsx)(j.a,{exact:!0,path:"/charts",children:Object(k.jsx)(X,{})}),Object(k.jsx)(j.a,{exact:!0,path:"/transactions",children:Object(k.jsx)(J,{})}),Object(k.jsx)(j.a,{exact:!0,path:"/redisReports",children:Object(k.jsx)(Z,{})}),Object(k.jsx)(j.a,{component:I})]})]})},c)},ee=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,99)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)($,{})}),document.getElementById("root")),ee()}},[[87,1,2]]]);
//# sourceMappingURL=main.84f3ba13.chunk.js.map